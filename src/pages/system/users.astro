---
import MainLayout from '@/layouts/MainLayout.astro';
const hasAccess = Astro.locals.permissions?.includes('010100');
if (!hasAccess) {
  return Astro.redirect("/");
}

import db from '@/lib/db';
const resultset = await db.query(`select user_name, user_lastname, email, is_active
  from sys_users
  where is_active = True`);
---
<MainLayout>
  <footer class="sticky top-16 w-full bg-green-400">
    pagination should be toolbar goes here
  </footer>
  <div class="bg-red-300">
    <h1>Users here</h1>
  </div>
  {resultset.rows.map((item) => (
    <li>{item.user_name} {item.user_lastname} - {item.email} - {item.is_active}</li>
  ))}
  <footer class="sticky bottom-0 w-full bg-green-400">
    pagination should be here
  </footer>
</MainLayout>
